{"ast":null,"code":"import _objectSpread from\"e:/Placement/live-polling-system/live-polling-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/App.js\nimport React,{useEffect,useMemo,useState}from\"react\";import{BrowserRouter as Router,Routes,Route,Link}from\"react-router-dom\";import io from\"socket.io-client\";import API_URL from\"./config\";import\"./App.css\";// Establish a single, persistent WebSocket connection\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(API_URL);// ====================================================================\n// ✅ HELPER & PAGE COMPONENTS MOVED OUTSIDE OF THE 'App' COMPONENT\n// ====================================================================\n/* Navbar */function Navbar(_ref){let{name,role}=_ref;const signOut=()=>{localStorage.clear();window.location.href='/';};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"nav-logo\",children:\"Intervue Poll\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/student\",className:\"nav-link\",children:\"Student\"}),/*#__PURE__*/_jsx(Link,{to:\"/teacher\",className:\"nav-link\",children:\"Teacher\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-right\",children:name&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[\"Signed in as \",/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:name}),\" (\",role,\")\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ghost\",onClick:signOut,style:{marginLeft:'10px',color:'white',borderColor:'white'},children:\"Sign Out\"})]})})]});}/* Footer */function Footer(){return/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Intervue Poll \\xA9 \",new Date().getFullYear(),\" - Real-time polling for education\"]})});}/* ResultBars Helper */function ResultBars(_ref2){let{poll}=_ref2;const total=(poll.counts||[]).reduce((a,b)=>a+b,0);return/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:poll.options.map((opt,i)=>{var _poll$counts;const count=((_poll$counts=poll.counts)===null||_poll$counts===void 0?void 0:_poll$counts[i])||0;const pct=total?Math.round(count/total*100):0;return/*#__PURE__*/_jsxs(\"div\",{className:\"result-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-label\",children:[i+1,\". \",opt]}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{width:\"\".concat(pct,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pct\",children:[pct,\"%\"]})]},i);})});}/* ChatPanel Helper */function ChatPanel(_ref3){let{messages,chatText,setChatText,sendChat}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-list\",children:messages.map((m,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-item\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[m.name,\":\"]}),\" \",m.text]},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:chatText,onChange:e=>setChatText(e.target.value),onKeyPress:e=>e.key==='Enter'&&sendChat(),placeholder:\"Type a message\\u2026\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:sendChat,children:\"Send\"})]})]});}/* HomePage */function HomePage(){return/*#__PURE__*/_jsxs(\"div\",{className:\"landing\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to Intervue Poll\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Use the navigation bar above to join as a student or manage polls as a teacher.\"})]});}/* StudentPage */function StudentPage(_ref4){let{name,role,activePoll,secondsLeft,userHasAnsweredActive,vote,joinAsStudent,chatProps}=_ref4;const[tempName,setTempName]=useState(\"\");if(!name||role!=='student'){return/*#__PURE__*/_jsxs(\"div\",{className:\"panel center-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter your name to join\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:tempName,onChange:e=>setTempName(e.target.value),placeholder:\"e.g. Rahul Bajaj\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:()=>joinAsStudent(tempName),children:\"Continue as Student\"})})]});}if(!activePoll)return/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Waiting for the teacher to start a poll\\u2026\"}),/*#__PURE__*/_jsx(ChatPanel,_objectSpread({},chatProps))]});const disabled=userHasAnsweredActive||secondsLeft<=0||activePoll.status!==\"active\";return/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"poll-head\",children:[/*#__PURE__*/_jsx(\"h3\",{children:activePoll.question}),/*#__PURE__*/_jsxs(\"span\",{className:\"timer\",children:[secondsLeft,\"s\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"options\",children:activePoll.options.map((opt,i)=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"option\",disabled:disabled,onClick:()=>vote(activePoll._id,i),children:opt},i))}),disabled&&/*#__PURE__*/_jsx(ResultBars,{poll:activePoll}),/*#__PURE__*/_jsx(ChatPanel,_objectSpread({},chatProps))]});}/* TeacherPage */function TeacherPage(_ref5){let{role,setRole,setName,students,polls,activePoll,qText,setQText,options,setOptions,duration,setDuration,createPoll,kick,chatProps}=_ref5;if(role!=='teacher'){return/*#__PURE__*/_jsxs(\"div\",{className:\"panel center-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Teacher Access\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"This will grant you control over the session polls and participants.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:()=>{localStorage.setItem(\"role\",\"teacher\");localStorage.setItem(\"name\",\"Teacher\");setRole(\"teacher\");setName(\"Teacher\");},children:\"Become the Teacher\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"teacher\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Poll\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",value:qText,onChange:e=>setQText(e.target.value),placeholder:\"Enter your question\"}),options.map((opt,i)=>/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:opt,onChange:e=>{const arr=[...options];arr[i]=e.target.value;setOptions(arr);},placeholder:\"Option \".concat(i+1)},i)),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ghost\",onClick:()=>setOptions(prev=>[...prev,\"\"]),children:\"+ Add option\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"select\",value:duration,onChange:e=>setDuration(Number(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:30,children:\"30s\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:60,children:\"60s\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:90,children:\"90s\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:createPoll,children:\"Ask Question\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Live Results\"}),activePoll?/*#__PURE__*/_jsx(ResultBars,{poll:activePoll}):/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"No active poll\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Participants (\",students.length,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"participants-list\",children:students.map(s=>/*#__PURE__*/_jsxs(\"li\",{className:\"participant-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:s}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ghost\",onClick:()=>kick(s),children:\"Kick\"})})]},s))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[\" \",/*#__PURE__*/_jsx(\"h3\",{children:\"Chat\"}),\" \",/*#__PURE__*/_jsx(ChatPanel,_objectSpread({},chatProps)),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Poll History\"}),polls.filter(p=>p.status!==\"active\").length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:\"No poll history yet\"}),polls.slice().reverse().filter(p=>p.status!==\"active\").map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"history\",children:[/*#__PURE__*/_jsx(\"b\",{children:p.question}),/*#__PURE__*/_jsx(ResultBars,{poll:p})]},p._id))]})]});}// ===============================================\n// ✅ MAIN 'App' COMPONENT\n// ===============================================\nexport default function App(){/* local persisted user info */const[role,setRole]=useState(localStorage.getItem(\"role\")||\"\");const[name,setName]=useState(localStorage.getItem(\"name\")||\"\");/* server-driven state */const[students,setStudents]=useState([]);const[polls,setPolls]=useState([]);const[activePollId,setActivePollId]=useState(null);const[messages,setMessages]=useState([]);const[time,setTime]=useState(Date.now());/* local input states */const[qText,setQText]=useState(\"\");const[options,setOptions]=useState([\"\",\"\"]);const[duration,setDuration]=useState(60);const[chatText,setChatText]=useState(\"\");/* WebSocket Listener */useEffect(()=>{socket.emit(\"joinSession\",{sessionId:\"default\"});socket.on(\"state\",data=>{setStudents(data.students||[]);setPolls(data.polls||[]);setActivePollId(data.activePollId||null);setMessages(data.messages||[]);if(role==='student'&&name&&!data.students.includes(name)){localStorage.clear();setRole(\"\");setName(\"\");alert(\"You have been removed from the session by the teacher.\");}});const timerId=setInterval(()=>setTime(Date.now()),1000);return()=>{socket.off(\"state\");clearInterval(timerId);};},[name,role]);/* derived state */const activePoll=useMemo(()=>polls.find(p=>String(p._id)===String(activePollId))||null,[polls,activePollId]);const userHasAnsweredActive=useMemo(()=>!(!activePoll||!name)&&!!(activePoll.answers||[]).find(a=>a.studentName===name),[activePoll,name]);const secondsLeft=useMemo(()=>{if(!activePoll)return 0;const end=new Date(activePoll.createdAt).getTime()+(Number(activePoll.durationSeconds)||0)*1000;return Math.max(0,Math.ceil((end-time)/1000));},[activePoll,time]);/* actions */async function joinAsStudent(studentName){if(!studentName.trim())return alert(\"Enter your name\");try{await fetch(\"\".concat(API_URL,\"/api/students\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:studentName.trim()})});localStorage.setItem(\"role\",\"student\");localStorage.setItem(\"name\",studentName.trim());setRole(\"student\");setName(studentName.trim());}catch(e){console.warn(\"join error\",e);}}async function createPoll(){const clean=options.map(o=>o.trim()).filter(Boolean);if(!qText.trim()||clean.length<2)return alert(\"Enter a question and at least 2 options\");try{await fetch(\"\".concat(API_URL,\"/api/polls\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({question:qText.trim(),options:clean,durationSeconds:duration})});setQText(\"\");setOptions([\"\",\"\"]);setDuration(60);}catch(e){console.warn(\"createPoll error\",e);}}async function vote(pollId,optionIndex){try{await fetch(\"\".concat(API_URL,\"/api/answers\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({pollId,optionIndex,studentName:name})});}catch(e){console.warn(\"vote error\",e);}}async function kick(n){try{await fetch(\"\".concat(API_URL,\"/api/kick\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:n})});}catch(e){console.warn(\"kick error\",e);}}async function sendChat(){if(!chatText.trim())return;try{await fetch(\"\".concat(API_URL,\"/api/messages\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name||role,text:chatText.trim()})});setChatText(\"\");}catch(e){console.warn(\"chat error\",e);}}// Group props for cleaner passing\nconst chatProps={messages,chatText,setChatText,sendChat};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{name:name,role:role}),/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/student\",element:/*#__PURE__*/_jsx(StudentPage,{name:name,role:role,activePoll:activePoll,secondsLeft:secondsLeft,userHasAnsweredActive:userHasAnsweredActive,vote:vote,joinAsStudent:joinAsStudent,chatProps:chatProps})}),/*#__PURE__*/_jsx(Route,{path:\"/teacher\",element:/*#__PURE__*/_jsx(TeacherPage,{role:role,setRole:setRole,setName:setName,students:students,polls:polls,activePoll:activePoll,qText:qText,setQText:setQText,options:options,setOptions:setOptions,duration:duration,setDuration:setDuration,createPoll:createPoll,kick:kick,chatProps:chatProps})})]})}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","BrowserRouter","Router","Routes","Route","Link","io","API_URL","jsx","_jsx","jsxs","_jsxs","socket","Navbar","_ref","name","role","signOut","localStorage","clear","window","location","href","className","children","to","type","onClick","style","marginLeft","color","borderColor","Footer","Date","getFullYear","ResultBars","_ref2","poll","total","counts","reduce","a","b","options","map","opt","i","_poll$counts","count","pct","Math","round","width","concat","ChatPanel","_ref3","messages","chatText","setChatText","sendChat","m","text","value","onChange","e","target","onKeyPress","key","placeholder","HomePage","StudentPage","_ref4","activePoll","secondsLeft","userHasAnsweredActive","vote","joinAsStudent","chatProps","tempName","setTempName","marginTop","_objectSpread","disabled","status","question","_id","TeacherPage","_ref5","setRole","setName","students","polls","qText","setQText","setOptions","duration","setDuration","createPoll","kick","setItem","arr","prev","Number","length","s","filter","p","slice","reverse","App","getItem","setStudents","setPolls","activePollId","setActivePollId","setMessages","time","setTime","now","emit","sessionId","on","data","includes","alert","timerId","setInterval","off","clearInterval","find","String","answers","studentName","end","createdAt","getTime","durationSeconds","max","ceil","trim","fetch","method","headers","body","JSON","stringify","console","warn","clean","o","Boolean","pollId","optionIndex","n","path","element"],"sources":["e:/Placement/live-polling-system/live-polling-system/frontend/src/App.js"],"sourcesContent":["// frontend/src/App.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Link } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport API_URL from \"./config\";\nimport \"./App.css\";\n\n// Establish a single, persistent WebSocket connection\nconst socket = io(API_URL);\n\n// ====================================================================\n// ✅ HELPER & PAGE COMPONENTS MOVED OUTSIDE OF THE 'App' COMPONENT\n// ====================================================================\n\n/* Navbar */\nfunction Navbar({ name, role }) {\n  const signOut = () => {\n    localStorage.clear();\n    window.location.href = '/';\n  };\n  return (\n    <nav className=\"navbar\">\n      <div className=\"nav-left\">\n        <h2 className=\"nav-logo\">Intervue Poll</h2>\n        <div className=\"nav-links\">\n          <Link to=\"/\" className=\"nav-link\">Home</Link>\n          <Link to=\"/student\" className=\"nav-link\">Student</Link>\n          <Link to=\"/teacher\" className=\"nav-link\">Teacher</Link>\n        </div>\n      </div>\n      <div className=\"nav-right\">\n        {name && (\n          <div className=\"user-info\">\n            Signed in as <span className=\"user-name\">{name}</span> ({role})\n            <button type=\"button\" className=\"ghost\" onClick={signOut} style={{marginLeft: '10px', color: 'white', borderColor: 'white'}}>Sign Out</button>\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n}\n\n/* Footer */\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p>Intervue Poll &copy; {new Date().getFullYear()} - Real-time polling for education</p>\n    </footer>\n  );\n}\n\n/* ResultBars Helper */\nfunction ResultBars({ poll }) {\n  const total = (poll.counts || []).reduce((a, b) => a + b, 0);\n  return (\n    <div className=\"results\">\n      {poll.options.map((opt, i) => {\n        const count = poll.counts?.[i] || 0;\n        const pct = total ? Math.round((count / total) * 100) : 0;\n        return (\n          <div key={i} className=\"result-row\">\n            <div className=\"result-label\">{i + 1}. {opt}</div>\n            <div className=\"bar-wrap\"><div className=\"bar\" style={{ width: `${pct}%` }} /></div>\n            <div className=\"pct\">{pct}%</div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/* ChatPanel Helper */\nfunction ChatPanel({ messages, chatText, setChatText, sendChat }) {\n  return (\n    <div className=\"chat\">\n      <div className=\"chat-list\">\n        {messages.map((m, i) => <div key={i} className=\"chat-item\"><b>{m.name}:</b> {m.text}</div>)}\n      </div>\n      <div className=\"chat-input\">\n        <input\n          type=\"text\" className=\"input\" value={chatText}\n          onChange={e => setChatText(e.target.value)}\n          onKeyPress={e => e.key === 'Enter' && sendChat()}\n          placeholder=\"Type a message…\"\n        />\n        <button type=\"button\" className=\"primary\" onClick={sendChat}>Send</button>\n      </div>\n    </div>\n  );\n}\n\n/* HomePage */\nfunction HomePage() {\n  return (\n    <div className=\"landing\">\n      <h1>Welcome to Intervue Poll</h1>\n      <p className=\"muted\">Use the navigation bar above to join as a student or manage polls as a teacher.</p>\n    </div>\n  );\n}\n\n/* StudentPage */\nfunction StudentPage({ name, role, activePoll, secondsLeft, userHasAnsweredActive, vote, joinAsStudent, chatProps }) {\n  const [tempName, setTempName] = useState(\"\");\n  if (!name || role !== 'student') {\n    return (\n      <div className=\"panel center-panel\">\n        <h2>Enter your name to join</h2>\n        <input type=\"text\" className=\"input\" value={tempName} onChange={e => setTempName(e.target.value)} placeholder=\"e.g. Rahul Bajaj\" />\n        <div className=\"row\" style={{ marginTop: 10 }}>\n          <button type=\"button\" className=\"primary\" onClick={() => joinAsStudent(tempName)}>Continue as Student</button>\n        </div>\n      </div>\n    );\n  }\n  if (!activePoll) return <div className=\"panel\"><p className=\"muted\">Waiting for the teacher to start a poll…</p><ChatPanel {...chatProps} /></div>;\n  const disabled = userHasAnsweredActive || secondsLeft <= 0 || activePoll.status !== \"active\";\n  return (\n    <div className=\"panel\">\n      <div className=\"poll-head\">\n        <h3>{activePoll.question}</h3>\n        <span className=\"timer\">{secondsLeft}s</span>\n      </div>\n      <div className=\"options\">\n        {activePoll.options.map((opt, i) => (\n          <button type=\"button\" key={i} className=\"option\" disabled={disabled} onClick={() => vote(activePoll._id, i)}>{opt}</button>\n        ))}\n      </div>\n      {disabled && <ResultBars poll={activePoll} />}\n      <ChatPanel {...chatProps} />\n    </div>\n  );\n}\n\n/* TeacherPage */\nfunction TeacherPage({ role, setRole, setName, students, polls, activePoll, qText, setQText, options, setOptions, duration, setDuration, createPoll, kick, chatProps }) {\n  if (role !== 'teacher') {\n    return (\n      <div className=\"panel center-panel\">\n        <h2>Teacher Access</h2>\n        <p className=\"muted\">This will grant you control over the session polls and participants.</p>\n        <button type=\"button\" className=\"primary\" onClick={() => {\n          localStorage.setItem(\"role\", \"teacher\");\n          localStorage.setItem(\"name\", \"Teacher\");\n          setRole(\"teacher\");\n          setName(\"Teacher\");\n        }}>\n          Become the Teacher\n        </button>\n      </div>\n    );\n  }\n  return (\n    <div className=\"teacher\">\n      <div className=\"panel\">\n        <h3>Create Poll</h3>\n        <textarea className=\"textarea\" value={qText} onChange={e => setQText(e.target.value)} placeholder=\"Enter your question\" />\n        {options.map((opt, i) => (\n          <input key={i} type=\"text\" className=\"input\" value={opt} onChange={e => { const arr = [...options]; arr[i] = e.target.value; setOptions(arr); }} placeholder={`Option ${i + 1}`} />\n        ))}\n        <div className=\"row\">\n          <button type=\"button\" className=\"ghost\" onClick={() => setOptions(prev => [...prev, \"\"])}>+ Add option</button>\n          <select className=\"select\" value={duration} onChange={e => setDuration(Number(e.target.value))}>\n            <option value={30}>30s</option> <option value={60}>60s</option> <option value={90}>90s</option>\n          </select>\n          <button type=\"button\" className=\"primary\" onClick={createPoll}>Ask Question</button>\n        </div>\n      </div>\n      <div className=\"panel\">\n        <h3>Live Results</h3>\n        {activePoll ? <ResultBars poll={activePoll} /> : <p className=\"muted\">No active poll</p>}\n      </div>\n      <div className=\"panel\">\n        <h3>Participants ({students.length})</h3>\n        <ul className=\"participants-list\">\n          {students.map(s => (\n            <li key={s} className=\"participant-row\">\n              <div>{s}</div>\n              <div><button type=\"button\" className=\"ghost\" onClick={() => kick(s)}>Kick</button></div>\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"panel\"> <h3>Chat</h3> <ChatPanel {...chatProps} /> </div>\n      <div className=\"panel\">\n        <h3>Poll History</h3>\n        {polls.filter(p => p.status !== \"active\").length === 0 && <div className=\"muted\">No poll history yet</div>}\n        {polls.slice().reverse().filter(p => p.status !== \"active\").map((p) => (\n          <div key={p._id} className=\"history\">\n            <b>{p.question}</b>\n            <ResultBars poll={p} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// ===============================================\n// ✅ MAIN 'App' COMPONENT\n// ===============================================\n\nexport default function App() {\n  /* local persisted user info */\n  const [role, setRole] = useState(localStorage.getItem(\"role\") || \"\");\n  const [name, setName] = useState(localStorage.getItem(\"name\") || \"\");\n\n  /* server-driven state */\n  const [students, setStudents] = useState([]);\n  const [polls, setPolls] = useState([]);\n  const [activePollId, setActivePollId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [time, setTime] = useState(Date.now());\n\n  /* local input states */\n  const [qText, setQText] = useState(\"\");\n  const [options, setOptions] = useState([\"\", \"\"]);\n  const [duration, setDuration] = useState(60);\n  const [chatText, setChatText] = useState(\"\");\n\n  /* WebSocket Listener */\n  useEffect(() => {\n    socket.emit(\"joinSession\", { sessionId: \"default\" });\n    socket.on(\"state\", (data) => {\n      setStudents(data.students || []);\n      setPolls(data.polls || []);\n      setActivePollId(data.activePollId || null);\n      setMessages(data.messages || []);\n      if (role === 'student' && name && !data.students.includes(name)) {\n        localStorage.clear();\n        setRole(\"\");\n        setName(\"\");\n        alert(\"You have been removed from the session by the teacher.\");\n      }\n    });\n    const timerId = setInterval(() => setTime(Date.now()), 1000);\n    return () => {\n      socket.off(\"state\");\n      clearInterval(timerId);\n    };\n  }, [name, role]);\n\n  /* derived state */\n  const activePoll = useMemo(() => polls.find(p => String(p._id) === String(activePollId)) || null, [polls, activePollId]);\n  const userHasAnsweredActive = useMemo(() => !(!activePoll || !name) && !!(activePoll.answers || []).find(a => a.studentName === name), [activePoll, name]);\n  const secondsLeft = useMemo(() => {\n    if (!activePoll) return 0;\n    const end = new Date(activePoll.createdAt).getTime() + (Number(activePoll.durationSeconds) || 0) * 1000;\n    return Math.max(0, Math.ceil((end - time) / 1000));\n  }, [activePoll, time]);\n\n  /* actions */\n  async function joinAsStudent(studentName) {\n    if (!studentName.trim()) return alert(\"Enter your name\");\n    try {\n      await fetch(`${API_URL}/api/students`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ name: studentName.trim() }) });\n      localStorage.setItem(\"role\", \"student\");\n      localStorage.setItem(\"name\", studentName.trim());\n      setRole(\"student\");\n      setName(studentName.trim());\n    } catch (e) { console.warn(\"join error\", e); }\n  }\n  async function createPoll() {\n    const clean = options.map(o => o.trim()).filter(Boolean);\n    if (!qText.trim() || clean.length < 2) return alert(\"Enter a question and at least 2 options\");\n    try {\n      await fetch(`${API_URL}/api/polls`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ question: qText.trim(), options: clean, durationSeconds: duration }) });\n      setQText(\"\");\n      setOptions([\"\", \"\"]);\n      setDuration(60);\n    } catch (e) { console.warn(\"createPoll error\", e); }\n  }\n  async function vote(pollId, optionIndex) {\n    try {\n      await fetch(`${API_URL}/api/answers`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ pollId, optionIndex, studentName: name }) });\n    } catch (e) { console.warn(\"vote error\", e); }\n  }\n  async function kick(n) {\n    try {\n      await fetch(`${API_URL}/api/kick`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ name: n }) });\n    } catch (e) { console.warn(\"kick error\", e); }\n  }\n  async function sendChat() {\n    if (!chatText.trim()) return;\n    try {\n      await fetch(`${API_URL}/api/messages`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ name: name || role, text: chatText.trim() }) });\n      setChatText(\"\");\n    } catch (e) { console.warn(\"chat error\", e); }\n  }\n\n  // Group props for cleaner passing\n  const chatProps = { messages, chatText, setChatText, sendChat };\n\n  return (\n    <Router>\n      <Navbar name={name} role={role} />\n      <div className=\"App\">\n        <Routes>\n          <Route path=\"/\" element={<HomePage />} />\n          <Route \n            path=\"/student\" \n            element={<StudentPage \n              name={name} \n              role={role} \n              activePoll={activePoll} \n              secondsLeft={secondsLeft} \n              userHasAnsweredActive={userHasAnsweredActive} \n              vote={vote} \n              joinAsStudent={joinAsStudent}\n              chatProps={chatProps} \n            />} \n          />\n          <Route \n            path=\"/teacher\" \n            element={<TeacherPage \n              role={role}\n              setRole={setRole}\n              setName={setName}\n              students={students} \n              polls={polls} \n              activePoll={activePoll} \n              qText={qText} \n              setQText={setQText} \n              options={options} \n              setOptions={setOptions} \n              duration={duration} \n              setDuration={setDuration} \n              createPoll={createPoll} \n              kick={kick}\n              chatProps={chatProps}\n            />} \n          />\n        </Routes>\n      </div>\n      <Footer />\n    </Router>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}